<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Dashboard</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link href="/stylesheets/style.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

</head>
<body>

<div class="naslovna">
    <div id="googleMap" class="form-control " style="position: relative; overflow: hidden; width: 100%; height:90%;margin: 10px;"></div>
</div>
<div class="moja ">
    <div class="card" style="background-color: rgba(245, 245, 245, 0.2); ">
        <div class="card-body">
            <h3>PONUDA</h3>
            <div class="card-group">
                <%for(let i=0;i < food.length;i++){%>
                    <div class="card" style="width: 20rem;margin:5px;">
                        <img class="card-img-top" src="../images/sabburito-mexico-grill.jpg " style="width:100%;"alt="Card image cap">
                        <div class="card-body">
                            <h5 class="card-title"><%= food[i].name %></h5>
                            <p class="card-text"><%= food[i].description %></p>
                            <p class="card-text"><%= food[i].price %> KM</p>
                            <hr><p class="card-text"><%= food[i].restaurant.name %></p>
                            <a href="#" class="btn btn-primary">Add to cart</a>
                        </div>
                    </div>
                <%}%>
            </div>
        </div>
        <div class="card-body">
            <h3>MENI</h3>
            <div class="card-group">
                <%for(let i=0;i < food.length;i++){%>
                    <div class="card" style="width: 20rem;margin:5px;">
                        <img class="card-img-top" src="../images/sabburito-mexico-grill.jpg " style="width:100%;"alt="Card image cap">
                        <div class="card-body">
                            <h5 class="card-title"><%= food[i].name %></h5>
                            <p class="card-text"><%= food[i].description %></p>
                            <p class="card-text"><%= food[i].price %> KM</p>
                            <hr><p class="card-text"><%= food[i].restaurant.name %></p>
                            <a href="#" onclick="addToCart('<%= food[i]._id%>','<%= food[i].restaurant._id%>');" class="btn btn-primary">Add to cart</a>
                        </div>
                    </div>
                <%}%>
            </div>
        </div>
        <div class="card-body">
            <h3>AKCIJE</h3>
            <div class="card-group">
                <% if (typeof sale !== 'undefined' && sale.length >= 0) {%>
                    <%for(let i=0;i < sale.length;i++){%>
                        <div class="card" style="width: 20rem;margin:5px;">
                            <img class="card-img-top" src="../images/sabburito-mexico-grill.jpg " style="width:100%;"alt="Card image cap">
                            <div class="card-body">
                                <h5 class="card-title"><%= sale[i].food %></h5>
                                <p class="card-text"><%= sale[i].date_from %></p>
                                <p class="card-text"><%= sale[i].date_to %> </p>
                                <hr><p class="card-text"><%= sale[i].salePrice %> KM</p>
                                <a href="#" onclick="addToCart('<%= food[i]._id%>','<%= food[i].restaurant._id%>');" class="btn btn-primary">Add to cart</a>
                            </div>
                        </div>
                    <%}%>
                <%}%>
            </div>
        </div>
    </div>
</div>
<script>
    var restoran = <%-JSON.stringify(restaurant)%>;
    const adresa = restoran[0].koordinate;
    var latlong = adresa.split(',');
    var latitude = parseFloat(latlong[0]);
    var longitude = parseFloat(latlong[1]);
    var addd = restoran[0].address;

    function myMap() {
        var mapProp= {
            center:new google.maps.LatLng(latitude,longitude),
            zoom:16,
        };
        var map = new google.maps.Map(document.getElementById("googleMap"),mapProp);
        var marker = new google.maps.Marker({
            position: new google.maps.LatLng(latitude, longitude),
            map: map,
            animation: google.maps.Animation.DROP,
        });
        var contentString = addd;
        var infowindow = new google.maps.InfoWindow({
            content: contentString,
            maxWidth: 160
        });
        infowindow.open(map, marker);
        marker.addListener("click", toggleBounce);
        function toggleBounce() {
            infowindow.open(map, marker);
            if (marker.getAnimation() !== null) {
                marker.setAnimation(null);
            } else {
                marker.setAnimation(google.maps.Animation.BOUNCE);
            }
        }
    }

</script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCVWoPIcc1pz1z5p_Ja6_CD7Ed9MzWN_ko&callback=myMap"></script>

</body>
</html>

</div>
</body>
</html>
